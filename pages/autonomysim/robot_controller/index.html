<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/nervosys/AutonomySim/pages/autonomysim/robot_controller/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Robot Controller - AutonomySim</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Robot Controller";
        var mkdocs_page_input_path = "pages\\autonomysim\\robot_controller.md";
        var mkdocs_page_url = "/nervosys/AutonomySim/pages/autonomysim/robot_controller/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> AutonomySim
        </a>
        <div class="version">
          master
        </div><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../README.md">Home</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../CHANGELOG.md">Changelog</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Building AutonomySim</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../use_precompiled.md">Download Binaries</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../build_windows.md">Build on Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../build_linux.md">Build on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../build_macos.md">Build on macOS</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../docker_ubuntu.md">Docker on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../azure.md">AutonomySim on Azure</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../unreal_custenv.md">Custom Unreal Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../Unity.md">AutonomySim with Unity</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../custom_unity_environments.md">Custom Unity Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../unity_api_support.md">Unity APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../build_faq.md">FAQ</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using AutonomySim</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../apis.md">Core APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../image_apis.md">Image APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../apis_cpp.md">C++ APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../api_docs/html/index.html">API Reference Docs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../dev_workflow.md">Development Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../settings.md">Settings</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../camera_views.md">Camera Views</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../using_car.md">Car Mode</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../remote_control.md">Remote Control</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../xbox_controller.md">XBox Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../steering_wheel_installation.md">Steering Wheel</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../multi_vehicle.md">Multiple Vehicles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Sensors</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../../sensors.md">Sensors</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../lidar.md">LIDAR</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../distance_sensor.md">Distance Sensor</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../InfraredCamera.md">Infrared Camera</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../AutonomySim_ros_pkgs.md">ROS: AutonomySim ROS Wrapper</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../AutonomySim_tutorial_pkgs.md">ROS: AutonomySim Tutorial Packages</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../gazebo_drone.md">Import Gazebo models</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../retexturing.md">Domain Randomization</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../meshes.md">Mesh Vertex Buffers</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../playback.md">Playing Logs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../voxel_grid.md">Voxel Grid Generator</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../event_sim.md">Event camera</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Design</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../design.md">Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../code_structure.md">Code Structure</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../adding_new_apis.md">Adding new APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../modify_recording_data.md">Modifying Recording Data</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../coding_guidelines.md">Coding Guidelines</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../robot_controller.md">Flight Controller</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../simple_flight.md">Simple Flight</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../hello_drone.md">Hello Drone</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">External Flight Controllers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">MavLink and PX4</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../../px4_setup.md">PX4 Setup for AutonomySim</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_sitl.md">PX4 in SITL</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_sitl_wsl2.md">PX4 SITL with WSL 2</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_lockstep.md">PX4 Lockstep</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_multi_vehicle.md">PX4 Multi-vehicle in SITL</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/1oY8Qu5maQQ">AutonomySim with Pixhawk</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://youtu.be/HNWdYrtw3f0">PX4 Setup with AutonomySim</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://www.youtube.com/watch?v=d_FyjKDWQfc&feature=youtu.be">Debugging Attitude Estimation</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/nervosys/AutonomySim/wiki/Intercepting-MavLink-messages">Intercepting MavLink Messages</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://github.com/nervosys/AutonomySim/wiki/Rapid-Descent-on-PX4-drones">Rapid Descent on PX4 Drones</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_build.md">Building PX4</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../px4_logging.md">PX4/MavLink Logging</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../log_viewer.md">MavLink LogViewer</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../mavlinkcom.md">MavLinkCom</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../../mavlinkcom_mocap.md">MavLink MoCap</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">ArduPilot</a>
    <ul>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/building-the-code.html">ArduPilot SITL Setup</a>
                </li>
                <li class="toctree-l2"><a class="" href="https://ardupilot.org/dev/docs/sitl-with-AirSim.html">AutonomySim & ArduPilot</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Upgrading</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../unreal_upgrade.md">Upgrading Unreal</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../upgrade_apis.md">Upgrading APIs</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../upgrade_settings.md">Upgrading Settings</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Contributed Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../reinforcement_learning.md">Reinforcement Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://www.youtube.com/watch?v=y09VbdQWvQY">Using Environments from Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/simondlevy/AirSimTensorFlow">Simple Collision Avoidance</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://aka.ms/AutonomousDrivingCookbook">Autonomous Driving on Azure</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/nervosys/AutonomySim/wiki/hexacopter">Building Hexacopter</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/nervosys/AutonomySim/wiki/moveOnPath-demo">Moving on Path Demo</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../point_clouds.md">Building Point Clouds</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../drone_survey.md">Surveying Using Drone</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../orbit.md">Orbit Trajectory</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/Bp86WiLUC80">Importing a custom multirotor mesh</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../object_detection.md">Object Detection</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://youtu.be/ZonkdMcwXH4">AutonomySim with MAVROS and PX4</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Misc</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../custom_drone.md">AutonomySim on Real Drones</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../cmake_linux.md">Installing cmake on Linux</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../hard_drive.md">Tips for Busy HDD</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../pfm.md">pfm format</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../unreal_proj.md">Setting up Unreal Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../unreal_blocks.md">Blocks Environment</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../who_is_using.md">Who is Using AutonomySim</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../working_with_plugin_contents.md">Working with UE Plugin Contents</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/nervosys/AutonomySim/wiki/technion">Formula Student Technion Self-drive</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Support</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../../faq.md">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../SUPPORT.md">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../create_issue.md">Create Issue</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../../CONTRIBUTING.md">Contribute</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">AutonomySim</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Robot Controller</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/nervosys/AutonomySim/edit/master/docs/pages/autonomysim/robot_controller.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="robot-controller">Robot Controller<a class="headerlink" href="#robot-controller" title="Permanent link">#</a></h1>
<p><img alt="UVX Micronav" src="images\micronav_gcs.png" title="UVX Micronav" /></p>
<h2 id="what-is-a-robot-controller">What is a Robot Controller?<a class="headerlink" href="#what-is-a-robot-controller" title="Permanent link">#</a></h2>
<p>A robot controller is any device or computer program used to control a robot. Robot controllers generally take one of five forms:</p>
<ol>
<li><strong>Human wetware controller</strong></li>
<li>Handheld remote control (RC) or radio frequency (RF) controller<ul>
<li>ACSST/FASST/DSM2/ELRS/Crossfire/Tracer, ZigBee, LoRaWAN, WiFi HaLow, or 5G/6G handheld controller</li>
<li>Protocol-agnostic software-defined radio (SDR) handheld controller</li>
</ul>
</li>
<li>Handheld hard-wired controller<ul>
<li>Serial/USB game-pad, flight-stick, or keyboard controller</li>
<li>Ethernet pendant controller (common for industrial robotic arms, where the pendant also performs computation)</li>
</ul>
</li>
<li><strong>Computer software controller</strong></li>
<li>A software architecture or control system</li>
<li>ArduPilot, PX4, BetaPilot, OpenPilot, dRehmFlight, etc.</li>
<li><strong>Computer hardware controller</strong></li>
<li>Runs a computer software control system</li>
<li>ArduPilot Mega (APM) 2.6, Pixhawk V6X, VOXL 2, SpeedyBee F405, Blade F722, GOKU GN745, RUSH Core 7, Naze32, DJI Naza, etc.</li>
<li><strong>Mechanical hardware controller</strong></li>
<li>The earliest autopilot systems were purely mechanical</li>
<li>Many assembly lines or continuous-flow production machines still use mechanical controllers</li>
<li><strong>Hybrid controller</strong></li>
<li>Most controllers today are human-assisted computer controllers</li>
<li>Examples include the DJI RC Pro Remote Controller and Skydio Controller, which are handheld computers, as well as traditional fly-by-wire and stabilization modes</li>
<li>Human-in-the-loop (HITL) or human-computer interaction (HCI) for semi-autonomous systems</li>
<li>Robots are fundamentally cyberphysical systems</li>
<li><strong>Remote Controller</strong></li>
<li>Any controller operated <em>ex situ</em> rather than <em>in situ</em></li>
</ol>
<p>While (1) involves manual control, (2-4) involve automatic control, (5) involves a semi-automatic control, and (6) involves a variety of control approaches.</p>
<p>Other types of controllers, such as electrochemical controllers (as in the nervous system) and chemosensory controllers (as in pheromone signaling), remain theoretical. We do, however, use magnetic fields for navigation and thus control, similar to <a href="https://doi.org/10.1007%2Fs00359-021-01507-0">a wide variety of animal species</a>.</p>
<h2 id="what-is-a-flight-controller">What is a Flight Controller?<a class="headerlink" href="#what-is-a-flight-controller" title="Permanent link">#</a></h2>
<p>A flight controller is simply a robot controller for the airborne or atmospheric domain. Colloquially, the term 'flight controller' commonly refers to a flight control unit (FCU) or computer, such as a microcontroller, running flight control software on a real-time operating system (RTOS). The flight control hardware and software together comprise a flight control system (FCS). Alternatively, the term 'flight controller' may also refer to a handheld RC transmitter, used to control aircraft for over a century (Tesla demonstrated radio control in 1898, following the 1870 wired demonstration by Siemens).</p>
<h2 id="which-other-domains-exist-for-robot-controllers">Which Other Domains Exist for Robot Controllers?<a class="headerlink" href="#which-other-domains-exist-for-robot-controllers" title="Permanent link">#</a></h2>
<p>There are robot controllers for every domain on Earth and beyond:</p>
<ul>
<li>Air</li>
<li>Ground</li>
<li>Surface (water)</li>
<li>Subsurface (water)</li>
<li>Space</li>
<li>Other Worlds</li>
</ul>
<p>These domains can be found in common robotic system classifications:</p>
<ul>
<li>Unmanned Aerial Vehicle (UAV)</li>
<li>Unmanned Ground Vehicle (UGV)</li>
<li>Unmanned Surface Vehicle (USV)</li>
<li>Unmanned Underwater Vehicle (UUV)</li>
<li>Unmanned Spacecraft (US)</li>
</ul>
<h2 id="why-do-i-need-a-robot-controller-for-a-simulator">Why Do I Need a Robot Controller for a Simulator?<a class="headerlink" href="#why-do-i-need-a-robot-controller-for-a-simulator" title="Permanent link">#</a></h2>
<p>Robots are empty vassels without a sense of agency or goal-directed behaviour. Breaking these <em>plans</em> down into a series of <em>actions</em> further necessitates a <em>control system</em> to translate the human and/or computer inputs into desired outputs or behaviour. The primary job of the <em>control system</em> is to estimate the <em>current state</em> from sensor data, determine the desired <em>future state</em> and required <em>control inputs</em> to optimally converge toward this state, and translate <em>control inputs</em> into <em>actuator and robot motion</em>.</p>
<div class="highlight"><pre><span></span><code>%%{init: {&quot;graph&quot;: {&quot;htmlLabels&quot;: false}}}%%
graph LR;

   S_previous[&quot;` $State_{t-1}$ `&quot;];

   A[State Previous (t-1)];
   B[State Physical (t0)];
   C[Sensor Noise];
   D[Sensors Current (t0)];
   E[State Estimator];
   F[State Current (t0)];
   G[Path Planner];
   H[State Future (t+1)];
   I[Actuator Commands];
   J[Actuator Noise];
   K[Actuator Future];

   State Previous (t_-1);
   State Physical + Encoder Noise --&gt; Sensors Current;
   State Previous + Sensors Current + State Estimator --&gt; State Current (t_0);
   State Current + Path Planner --&gt; State Desired (t_+1);
   State Current + Actuator Commands --&gt; State Future;

    A --&gt; B;
    B --&gt; C;
    C --&gt; D;
    D --&gt; E;
</code></pre></div>
<p>Where sensors noise is related to resolution, precision, latency, hysteresis, thermal, optical, electromagnetic, and model error.</p>
<p><code>$S_{t-1}$</code></p>
<p>The state estimator is commonly a form of <a href="https://arxiv.org/abs/1910.03558/">Kálmán filter</a> (not to be confused with his contemporary campatriot, <a href="https://en.wikipedia.org/wiki/Theodore_von_K%C3%A1rm%C3%A1n">von Kármán</a>):</p>
<div class="highlight"><pre><span></span><code><span class="k">\mathrm</span><span class="nb">{</span>Initial State<span class="nb">}</span>
<span class="k">\mathbf</span><span class="nb">{</span>x<span class="nb">}_</span>0 P<span class="nb">_</span>0

<span class="k">\mathrm</span><span class="nb">{</span>Prediction<span class="nb">}</span>
<span class="k">\mathbf</span><span class="nb">{</span>x<span class="nb">}_{</span>k+1<span class="nb">}^{</span>(P)<span class="nb">}</span> <span class="nb">&amp;</span>= A <span class="k">\mathbf</span><span class="nb">{</span>x<span class="nb">}_</span>k + B <span class="nb">{</span><span class="k">\color</span><span class="nb">{</span>orange<span class="nb">}</span> a<span class="nb">_</span>k<span class="nb">}</span> P<span class="nb">_{</span>k+1<span class="nb">}^{</span>(P)<span class="nb">}</span> <span class="nb">&amp;</span>= A P<span class="nb">_</span>k A<span class="nb">^</span><span class="k">\tran</span> + C<span class="nb">_</span>k<span class="nb">^{</span>(r<span class="nb">_</span>s)<span class="nb">}</span>

<span class="k">\mathrm</span><span class="nb">{</span>Update<span class="nb">}</span>
k <span class="k">\leftarrow</span> k + 1

<span class="k">\mathrm</span><span class="nb">{</span>Innovation<span class="nb">}</span>
K<span class="nb">_</span>k <span class="nb">&amp;</span>= P<span class="nb">_</span>k<span class="nb">^{</span>(P)<span class="nb">}</span> H<span class="nb">^</span><span class="k">\tran</span> <span class="nb">{</span><span class="k">\left</span> (H P<span class="nb">_</span>k<span class="nb">^{</span>(P)<span class="nb">}</span> H<span class="nb">^</span><span class="k">\tran</span> + C<span class="nb">_</span>k<span class="nb">^{</span>(r<span class="nb">_</span>m)<span class="nb">}</span> <span class="k">\right</span>)<span class="nb">}^{</span>-1<span class="nb">}</span> <span class="nb">{</span><span class="k">\color</span><span class="nb">{</span>blue<span class="nb">}</span> <span class="k">\mathbf</span><span class="nb">{</span>x<span class="nb">}_</span>k<span class="nb">}</span> <span class="nb">&amp;</span>= (I - K<span class="nb">_</span>k H) <span class="k">\mathbf</span><span class="nb">{</span>x<span class="nb">}_</span>k<span class="nb">^{</span>(P)<span class="nb">}</span> + K<span class="nb">_</span>k <span class="nb">{</span><span class="k">\color</span><span class="nb">{</span>orange<span class="nb">}</span> z<span class="nb">_</span>k<span class="nb">}{</span><span class="k">\color</span><span class="nb">{</span>blue<span class="nb">}</span> P<span class="nb">_</span>k<span class="nb">}</span> <span class="nb">&amp;</span>= (I - K<span class="nb">_</span>k H) P<span class="nb">_</span>k<span class="nb">^{</span>(P)<span class="nb">}</span>
</code></pre></div>
<p>For quadrotors, desired state can be specified as roll, pitch and yaw, for example. It then estimates actual roll, pitch and yaw using gyroscope and accelerometer. Then it generates appropriate motor signals so actual state becomes desired state. You can find more in-depth in <a href="paper/main.pdf">our paper</a>.</p>
<h2 id="how-do-robot-controllers-communicate-with-the-simulator">How Do Robot Controllers Communicate with the Simulator?<a class="headerlink" href="#how-do-robot-controllers-communicate-with-the-simulator" title="Permanent link">#</a></h2>
<p>Simulator consumes the motor signals generated by flight controller to figure out force and thrust generated by each actuator (i.e. propellers in case of quadrotor). This is then used by the physics engine to compute the kinetic properties of the vehicle. This in turn generates simulated sensor data and feed it back to the flight controller. You can find more in-depth in <a href="paper/main.pdf">our paper</a>.</p>
<h2 id="what-is-hardware-in-the-loop-and-software-in-the-loop">What is Hardware-in-the-loop and Software-in-the-loop?<a class="headerlink" href="#what-is-hardware-in-the-loop-and-software-in-the-loop" title="Permanent link">#</a></h2>
<p>Hardware-in-the-loop (HITL) means that the flight controller runs on physical hardware, such as an APM, Pixhawk, or Naze32 flight control unit (FCU). While some FCUs use real-time (<code>RT_PREEMPT</code>) Linux operating systems (OSes), typically running on a 64-bit ARM system-on-chip (SoC), most FCUs use hard real-time OSes running on microcontrollers.</p>
<p>You then connect this hardware to PC using USB port. Simulator talks to the device to retrieve actuator signals and send it simulated sensor data. This is obviously as close as you can get to real thing. However, it typically requires more steps to set up and usually hard to debug. One big issue is that simulator clock and device clock runs on their own speed and accuracy. Also, USB connection (which is usually only USB 2.0) may not be enough for real-time communication.</p>
<p>Software-in-the-loop (SITL) means that the flight controller software runs on your computer as opposed to separate board. This is generally fine except that now you are not touching any code paths that are specific to your device. Also, none of your code now runs with real-time clock usually provided by specialized hardware board. For well-designed flight controllers with software clock, these are usually not concerning issues.</p>
<h2 id="which-flight-controllers-are-supported">Which Flight Controllers are Supported?<a class="headerlink" href="#which-flight-controllers-are-supported" title="Permanent link">#</a></h2>
<p>AutonomySim has built-in flight controller called <a href="../simple_flight/">simple_flight</a> and it is used by default. You don't need to do anything to use or configure it. AutonomySim also supports <a href="../px4_setup/">PX4</a> &amp; <a href="https://ardupilot.org/dev/docs/sitl-with-AutonomySim.html">ArduPilot</a> as external flight controllers for advanced users.</p>
<h2 id="using-autonomysim-without-flight-controller">Using AutonomySim Without Flight Controller<a class="headerlink" href="#using-autonomysim-without-flight-controller" title="Permanent link">#</a></h2>
<p>Yes, now it's possible to use AutonomySim without flight controller. Please see the <a href="../image_apis/">instructions here</a> for how to use so-called "Computer Vision" mode. If you don't need vehicle dynamics, we highly recommend using this mode.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2024 Nervosys, LLC</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/nervosys/AutonomySim" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
